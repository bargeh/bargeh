{
  "resources": {
	"postgres": {
	  "type": "container.v0",
	  "connectionString": "Host={postgres.bindings.tcp.host};Port={postgres.bindings.tcp.port};Username=postgres;Password={postgres-password.value}",
	  "image": "docker.io/library/postgres:16.2",
	  "env": {
		"POSTGRES_HOST_AUTH_METHOD": "scram-sha-256",
		"POSTGRES_INITDB_ARGS": "--auth-host=scram-sha-256 --auth-local=scram-sha-256",
		"POSTGRES_USER": "postgres",
		"POSTGRES_PASSWORD": "{postgres-password.value}"
	  },
	  "bindings": {
		"tcp": {
		  "scheme": "tcp",
		  "protocol": "tcp",
		  "transport": "tcp",
		  "targetPort": 5432
		}
	  }
	},
	"users": {
	  "type": "project.v0",
	  "path": "../../Services/Bargeh.Users.Api/Bargeh.Users.Api.csproj",
	  "env": {
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EXCEPTION_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EVENT_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_RETRY": "in_memory",
		"ASPNETCORE_FORWARDEDHEADERS_ENABLED": "true",
		"ConnectionStrings__postgres": "{postgres.connectionString}"
	  },
	  "bindings": {
		"http": {
		  "scheme": "http",
		  "protocol": "tcp",
		  "transport": "http2"
		},
		"https": {
		  "scheme": "https",
		  "protocol": "tcp",
		  "transport": "http2"
		}
	  }
	},
	"forums": {
	  "type": "project.v0",
	  "path": "../../Services/Bargeh.Forums.Api/Bargeh.Forums.Api.csproj",
	  "env": {
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EXCEPTION_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EVENT_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_RETRY": "in_memory",
		"ASPNETCORE_FORWARDEDHEADERS_ENABLED": "true",
		"ConnectionStrings__postgres": "{postgres.connectionString}",
		"services__users__http__0": "{users.bindings.http.url}",
		"services__users__https__0": "{users.bindings.https.url}"
	  },
	  "bindings": {
		"http": {
		  "scheme": "http",
		  "protocol": "tcp",
		  "transport": "http2"
		},
		"https": {
		  "scheme": "https",
		  "protocol": "tcp",
		  "transport": "http2"
		}
	  }
	},
	"wapp": {
	  "type": "project.v0",
	  "path": "../../Wapps/Bargeh.Main.Wapp/Bargeh.Main.Wapp.csproj",
	  "env": {
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EXCEPTION_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_EMIT_EVENT_LOG_ATTRIBUTES": "true",
		"OTEL_DOTNET_EXPERIMENTAL_OTLP_RETRY": "in_memory",
		"ASPNETCORE_FORWARDEDHEADERS_ENABLED": "true",
		"services__users__http__0": "{users.bindings.http.url}",
		"services__users__https__0": "{users.bindings.https.url}",
		"services__forums__http__0": "{forums.bindings.http.url}",
		"services__forums__https__0": "{forums.bindings.https.url}"
	  },
	  "bindings": {
		"http": {
		  "scheme": "http",
		  "protocol": "tcp",
		  "transport": "http"
		},
		"https": {
		  "scheme": "https",
		  "protocol": "tcp",
		  "transport": "http"
		}
	  }
	},
	"postgres-password": {
	  "type": "parameter.v0",
	  "value": "{postgres-password.inputs.value}",
	  "inputs": {
		"value": {
		  "type": "string",
		  "secret": true,
		  "default": {
			"generate": {
			  "minLength": 22
			}
		  }
		}
	  }
	}
  }
}
@page "/Forum/{ForumPermalink}"
@using Forums.Api
@inject ForumsProto.ForumsProtoClient ForumsService;
@inject NotFoundListener NotFoundService;
@using Grpc.Core
@using Bargeh.Main.Wapp.Client.Infrastructure

<div class="cover"></div>
@if(_forum is not null)
{
	<div class="profile">
		<img src="img/Logo-Main-12.png" alt="تصویر نمایه">
		<h1 class="center">انجمن برنامه‌نویسان</h1>
		<div class="index-buttons">
			<p>۱۴۰۰۰۰+ عضو</p>
			<p>۱۳ حامی</p>
		</div>
		<p>مالک انجمن: <a>@@matin</a></p>
		<p>ناظران انجمن: <a>@@user10</a>، <a>@@user02</a>، <a>@@user03</a></p>
		<p class="center-justify">لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ و با استفاده از طراحان گرافیک است. چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است و برای شرایط فعلی تکنولوژی مورد نیاز و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد...</p>
		<div class="index-buttons">
			<button type="button" class="button-filled">
				<img src="img/UserPlus.svg" alt="دنبال‌کردن">
				<p>دنبال کردن</p>
			</button>
			<button type="button" class="button-gold">
				<img src="img/Support.svg" alt="حمایت">
				<p>حمایت از انجمن</p>
			</button>
		</div>
	</div>

	<div class="footer-info">
		<h2>گفت و گوهای سنجاق شده‌ی انجمن برنامه‌نویسان</h2>
		<div class="shadow-box secondary-search-bar footer-links">
			<img src="img/Search.svg" alt="علامت ذره‌بین" class="search-icon">
			<input type="text" class="search-input" placeholder="جست و جو در گفت و گوهای انجمن برنامه‌نویسان...">
		</div>
	</div>

	<div class="forums-list">
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
	</div>

	<div class="footer-info">
		<h2>همه‌ی گفت و گو‌های انجمن برنامه‌نویسان</h2>
		<div class="shadow-box secondary-search-bar footer-links">
			<img src="img/Search.svg" alt="علامت ذره‌بین" class="search-icon">
			<input type="text" class="search-input" placeholder="جست و جو در گفت و گوهای انجمن برنامه‌نویسان...">
		</div>
	</div>

	<div class="forums-list">
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
		<div class="topic">
			<div>
				<strong>بهترین سایت آموزش برنامه‌نویسی</strong> در انجمن برنامه‌نویسان
				<p class="topic-description">
					۳۲
					<img src="img/ChatSingle.svg" alt="گفته‌ها"
						 class="topic-chat">بچه‌ها
					واسه
					شروع برنامه‌نویسی چه سایتی خوبه واقعا؟ خیلی دوره‌ها رو دیدم ولی واقعا آشغال بودن
				</p>
			</div>
		</div>
	</div>

	<a class="button-primary">
		<img src="img/More.svg" alt="بیشتر">
		<p>نمایش بیشتر</p>
	</a>
}
else
{
	<Loading/>
}

@code {

	[Parameter]
	public string ForumPermalink { get; init; } = null!;

	private ForumReply? _forum;

	protected override async Task OnInitializedAsync()
	{
		try
		{
			_forum = await ForumsService.GetForumByPermalinkAsync(new()
			{
				Permalink = ForumPermalink
			});
		}
		catch(RpcException exception)
		{
			// ReSharper disable once InvertIf
			if(exception.StatusCode == StatusCode.NotFound)
			{
				NotFoundService.NotifyNotFound();
				return;
			}

			throw;
		}
	}

}